<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <script type="text/javascript" src="https://codeassign.github.io/markjax/dist/markjax.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flexboxgrid/6.3.1/flexboxgrid.min.css">

    <style>
      body {
        padding: 80px;
      }
    </style>
  </head>

  <body>
    <textarea class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
## CodeAssign Editor
Is a [SimpleMDE](https://simplemde.com/) Markdown editor powerd by [MarkJax](http://markjax.codeassign.com/) parser.

To use it you need to include both *SimpleMDE* and *MarkJax* into your page:

```
<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
<script type="text/javascript" src="https://codeassign.github.io/markjax/dist/markjax.min.js"></script>
```

and now when you create new `SimpleMDE` object you need to specify custom `previewRender` function which uses *MarkJax*:
```
var simplemde = new SimpleMDE({                                                                                      
  previewRender: markjax
});
```
And of course you can still write and use LaTeX:
$$\sum_{n=1}^{\infty} 2^{-n} = 1$$
</textarea>

    <script>
    function getCursorCoordinates() {
      var cursorLine = simplemde.codemirror.getCursor()["line"];
      var cursorCh = simplemde.codemirror.getCursor()["ch"];

      return { line: cursorLine, ch: cursorCh };
    }

    function insertAfterCursor(string, len) {      
      var anchor = getCursorCoordinates();

      simplemde.codemirror.doc.replaceRange(string, anchor);

      var cursorCoordinates = getCursorCoordinates();
      var b = cursorCoordinates.line;
      simplemde.codemirror.setCursor({ line: cursorCoordinates.line, ch: cursorCoordinates.ch - len });

      simplemde.codemirror.focus();
    }

      var simplemde = new SimpleMDE({
        previewRender: function(plainText, preview) {
          setTimeout(function() {
            markjax(plainText, preview);
          }, 50);
          return preview.innerHTML;
        },
        spellChecker: false,
        indentWithTabs: false,
        toolbar: [
          "bold",
          "italic",
          "heading",
          "|",
          {
            name: "inlineMath",
            action: function inlineMath(editor) {
              insertAfterCursor("$$", 1)              
            },
            className: "fa fa-bar-chart-o",
            title: "Inline Latex Expression"
          },
          {
            name: "mathBlock",
            action: function mathBlock(editor) {
              insertAfterCursor("$$$$", 2)
            },
            className: "fa fa-area-chart",
            title: "Latex Expression Block"
          },
          "|",
          "quote",
          "unordered-list",
          "ordered-list",
          "|",
          "link",
          "image",
          "|",
          "preview",
          "side-by-side",
          "fullscreen",
          "|",
          "guide"
        ]
      });
      simplemde.toggleSideBySide(simplemde);
    </script>
  </body>
</html>
